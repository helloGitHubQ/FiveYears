# 类文件结构

## 概述
在 Java 中，JVM可以理解的代码叫做字节码（.class 文件）；它不面向任何特定的处理器，只面向虚拟机。Java 语言通过字节码的方式，在一定程度上解决了传统解释型语言执行效率低的问题，但同时又保留了解释型语言的可移植性。所以 Java 程序运行起来比较高效。由于字节码并不是针对一种机器，因此 Java 程序无需重新编译便可在多平台上运行。

![java虚拟机](https://i.imgur.com/eEOspuh.png)

.class 文件是不用语言在 Java 虚拟机之间的重要桥梁，同时也是支持 Java 跨平台的主要原因之一。

## Class文件结构总结

![class文件字节码结构示意图](https://i.imgur.com/B7btXMF.png)

- 魔数：确认该文件能否被虚拟机接受的 Class 文件。

CLass 文件版本：高版本的 Java 虚拟机可以执行低版本的编辑器生成的 class 文件，但是低版本的 Java 虚拟机就不能执行高版本的编辑器生成的 class 文件。实际开发中的 JDK 版本和生产上的 JDK 版本一致。

- 常量池：常量池计数器是从1开始的，0代表 不引用任何一个常量池项 。

开始的第一位是一个 u1 类型的标志位	 -tag 来标识常量的类型。

![常量池](https://i.imgur.com/R4rNSxx.png)

- 访问标识：用于识别一些类或者接口层次的访问信息。包括这个 Class 是类还是接口,是否为 public 或者 abstract 类型，如果是类的话是否声明为 final等等。

![访问标识](https://i.imgur.com/jTvTfG3.png)

- 当前类索引，父类索引和接口索引集合：

- 字段表集合：

- 方法表集合：

- 属性表集合：在 Class 文件，字段表 ，方法表中可以携带自己的属性表集合，以用于描述某些场景的专有信息。只要不与已有的属性名重复，任何人实现的编辑器都可以向属性表里写入自己定义的属性信息。Java 虚拟机运行的时候会忽略它不认识的属性。

